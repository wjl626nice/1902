<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>主页面</title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
		<script type="text/javascript" src="http://libs.baidu.com/jquery/1.11.1/jquery.js"></script>
		<script type="text/javascript" src="js/common.js"></script>
		<script type="text/javascript">
			// 当文档加载完成之后调用
// 			window.onload = function(){
// 				alert(document.querySelector('button').innerHTML);
// 			}
			
// 			$(document).ready(function(){
// 			   alert($("button").html());
// 			});
			
			$(function(){
				// alert($("button").html());
				
				$("#username").html(sessionStorage.username);
				
				// 注销
// 				$("#logout").click(function(){
// 					var url = preUrl + logoutUrl;
// 					var param = {token: sessionStorage.token};
// 					$.post(url, param, function(d){
// 						if(d.result == 1){
// 							// 删除本地token
// 							sessionStorage.removeItem("token");
// 						}
// 					});
// 				});
				
				// on("事件类型","过滤选择器","传递到事件中的内容",函数) 
				$("#logout").on("click",function(){
					var url = preUrl + logoutUrl;
					var param = {token: sessionStorage.token};
					$.post(url, param, function(d){
						if(d.result == 1){
							// 删除本地token
							sessionStorage.removeItem("token");
							sessionStorage.removeItem("username");
							$("#username").html("");
							
							changeUsernameShow();
						}
					});
				});
				
				
				// 更改是否显示用户名
				function changeUsernameShow(){
					if(sessionStorage.token){
						$(".logined").addClass("show");
						$(".unlogin").removeClass("show");
					}else{
						$(".logined").removeClass("show");
						$(".unlogin").addClass("show");
					}
				}
				changeUsernameShow();
				
				
				// 点击左边 li 更改右侧显示的内容
				$(".left>ul").on("click","li",function(e){
					// 点击的li的索引
					// 获取页面中所有的li  nodelist	类数组
					var children = document.querySelectorAll(".left li");
// 					console.log(children);
// 					console.log(e.target);
					// Array.from(类数组)	把类数组转化成数组
					var arr = Array.from(children);
					// 当前点击的li的索引
					var index = arr.indexOf(e.target);
					// console.log(index);
					
					$(".right div").removeClass("visibility");
					$(".right div").eq(index).addClass("visibility");
				});
				
			});

		</script>
	</head>
	<body>
		<div class="main">
			<div class="header">
				<div class="logined">
					<span id="username"></span>
					<button id="logout">注销</button>
				</div>
				
				<div class="unlogin">
					<a href="./register.html">注册</a>
					<a href="./login.html">登录</a>
				</div>
			</div>
			
			<div class="content">
				<div class="left">
					<ul>
						<li>所有人的微博</li>
						<li>我的微博</li>
						<li>我的关注</li>
					</ul>
				</div>
				<div class="right">
					<div class="allwb">a</div>
					<div class="mywb">b</div>
					<div class="myfollows">c</div>
				</div>
			</div>
			<div class="footer"></div>
		</div>
	</body>
</html>
