## 函数对象

在Python中，函数也是一种对象。我们在前面已经使用过。

```
def ss(x):
    print(x + 1)


print(ss)
```

如果我们把函数赋值给一个变量，是不是这个变量就指向了这个函数对象？我们可以试试：

```
xxx = ss
print(xxx)
xxx(2)
```

### 函数名也是变量

通过上面我们发现，函数名其实就是指向函数对象的一个变量，对于我们上面的函数，其实`ss`只是一个变量名而已，它只是指向了函数对象而已。

如果我们把`ss`重新赋值，也就是让`ss`指向其它对象，会发生什么呢？

```
print(type(ss))
ss = 1234
print(type(ss))
```


由此可以看出，普通的函数和其他的数据类型也就没有什么本质的区别了。也可以作为参数传递和返回。



## 再看map()、reduce()、filter()、sorted()


### map()

该函数可以接收两个参数，一个是`函数`，一个是`可迭代对象`。`map`会将传入的函数依次作用到可迭代对象的每一个元素，并把得到的新结果返回。

举例说明，比如我们有个函数`f(x) = x * x`，要把这个函数作用在一个list `[1, 2, 3, 4, 5, 6, 7, 8, 9]`上，就可以用map()实现如下：

![分析图](./1.png)

使用代码：

```
# 定义f(x)
def f(x):
    return x * x

# 生成一个map对象
li = map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])
# 转换成列表
li = list(li)
print(li)
```

### reduce()

`reduce()`函数也必须接收两个参数，第一个参数也是个函数，第二个参数也是个序列对象。它的工作流程是：用传给 `reduce()` 中的函数先对可迭代对象中的第 1、2 个元素进行操作，得到的结果再与第3个数据用函数运算，直到最后得到一个结果。

```
from functools import reduce

# 定义f(x)
def f(x, y):
    return x * y

l = reduce(f, [2, 4, 6, 10])

print(l)

```

上面的例子的工作流程是这样的：

现将 2 和 4 传入到`f()`函数中，即 f(2, 4) 的到结果为：8

然后将 8 和 6 传入到`f()`函数中，即 f(8, 6) 的到结果为：48

然后将 48 和 10 传入到`f()`函数中，即 f(48, 10) 的到结果为：48


### filter()

`filter()`也接收一个函数和一个可迭代对象。`filter()`把传入的函数依次作用于每个元素，然后根据返回值是`True`还是`False`决定保留还是丢弃该元素。返回的是一个filter对象，可以通过list()或者for循环取出内容。注意：传入的函数返回值必须是布尔类型。若是真则保留元素，假则过滤掉这元素。

```
# 筛选出偶数
def get_even(x):
    if x % 2 == 0:
        return True
    else:
        return False

l = filter(get_even, range(0, 10))
l = list(l)
print(l)
```

### sorted()

`sorted()`默认是一个可以将序列数据从从小到大进行排序的一个函数。

```
l = [1, 3, 9, 2, -2, 90, 10]
print(sorted(l))
```

列表(list)自带的有排序方法`list.sort()`，排序方式和`sorted()`基本一样，不过`list.sort()`操作的是元列表，而`sorted()`排序后生成的是个新的列表。

如果想**排逆序**呢？很简单，只要将可选参数reverse设置为True即可

```
l = [1, 3, 9, 2, -2, 90, 10]
print(sorted(l, reverse=True))
```

当然了，有时候，我们可能会处理比较复杂的序列，或者需要的排序规则比较复杂，那如何排序呢？其实`sorted()`可以有个`key`参数，可以通过该参数传入一个函数。该函数将作用于list的每一个元素上，并根据key函数返回的结果进行排序。

```
l = [('如花', 99), ('小花', 35), ('小明', 66), ('张三', 40)]

def xxx(x):
    return x[1]

print(sorted(l, key=xxx))

```

> 关于参数key的进一步说明： 排序的核心是比较两个元素的大小。如果要比较的是两个数字，我们可以直接比较；如果是字符串，也可以按照ASCII码的大小进行比较。但是，如果要比较的元素是两个序列或dict等复杂数据呢？这时，我们可能需要指定一个计算“**用于比较的值**”的运算规则，比如我们指定取两个dict中的某个共同的key对应的值来进行比较，又比如我们指定用将两个字符串都转换为小写或者大写后的结果值进行比较。其实说简单点，参数key这个函数作用是：计算/获取用来进行比较的值。如果我们需要自定义这个函数时，需要注意该函数应该有一个参数，这个参数接收的就是可迭代对象中每个元素的值。



## 高阶函数

像上面介绍的这种参数可以是函数的函数，我们就称之为高阶函数。

